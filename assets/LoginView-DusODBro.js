import{d as b,u as k,r as n,c as s,h as p,a as e,t as v,b as w,i as h,v as m,w as x,g as V,o as t,_ as L}from"./index-Bnnrt8ly.js";const S={class:"auth-container"},A={key:0,class:"user-info"},B=["src"],C={key:1,class:"login-box"},M={type:"submit"},N={key:0,class:"spinner"},U={key:1},q={key:0,class:"error-message"},D=b({__name:"LoginView",setup(E){const a=k(),g=V(),r=n(""),l=n(""),u=n(""),i=n(!1),f=async()=>{i.value=!0;const c=await a.login(r.value,l.value);c.success||(u.value=c.message??"登入失敗"),i.value=!1},y=()=>{a.logout(),g.push("/")};return(c,o)=>{var _;return t(),s("div",S,[p(a).isAuthenticated?(t(),s("div",A,[e("img",{src:(_=p(a).user)==null?void 0:_.avatar,alt:"Avatar",class:"avatar"},null,8,B),e("span",null,v(p(a).getUserName),1),e("button",{onClick:y},"登出")])):(t(),s("div",C,[e("form",{onSubmit:x(f,["prevent"])},[h(e("input",{"onUpdate:modelValue":o[0]||(o[0]=d=>r.value=d),type:"text",placeholder:"帳號",required:""},null,512),[[m,r.value]]),h(e("input",{"onUpdate:modelValue":o[1]||(o[1]=d=>l.value=d),type:"password",placeholder:"密碼",required:""},null,512),[[m,l.value]]),e("button",M,[i.value?(t(),s("span",N)):(t(),s("span",U,"登入"))])],32),u.value?(t(),s("p",q,v(u.value),1)):w("",!0)]))])}}}),R=L(D,[["__scopeId","data-v-25ebe3bb"]]);export{R as default};

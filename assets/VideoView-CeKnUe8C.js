import{j as h,u as p,_ as v,r as m,k as g,l as _,c as o,a as t,b as c,e as y,i as b,m as k,h as d,t as u,n as w,F as f,p as U,T as S,o as a}from"./index-DpoBHZrT.js";const x="https://home.sunnytseng.com/api/math-api/fetchUrl/",V=h("url",{state:()=>({urls:[],loading:!1}),getters:{hasUrls:i=>i.urls.length>0},actions:{async fetchUrl(i){const l=p();this.loading=!0;try{const e=await fetch(`${x}?grade=${i}`,{method:"GET",headers:{Authorization:`Bearer ${l.token??""}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fetch Failed");const r=await e.json();this.urls=Array.isArray(r.url)?r.url:[]}catch(e){console.error("Error fetching URL:",e),this.urls=[]}finally{this.loading=!1}}}}),A={class:"video-selector container-fluid mt-4"},j={class:"mb-3"},B={key:0,class:"text-muted"},E={key:1,class:"text-info"},F={key:0,class:"list-group list-group-numbered"},T={class:"ms-2 me-auto"},C=["href"],L={class:"badge bg-primary rounded-pill"},N={key:1,class:"text-danger mt-3"},$={__name:"VideoView",setup(i){const l=V(),e=m(null);return g(e,r=>{r!==null&&l.fetchUrl(r)}),_(()=>{e.value!==null&&l.fetchUrl(e.value)}),(r,s)=>(a(),o("div",null,[t("div",A,[s[4]||(s[4]=t("h2",null,"📺 各年級影片列表",-1)),t("div",j,[s[2]||(s[2]=t("label",{for:"gradeSelect",class:"form-label"},"🎓 選擇年級",-1)),b(t("select",{id:"gradeSelect",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=n=>e.value=n)},s[1]||(s[1]=[t("option",{disabled:"",value:""},"請選擇年級",-1),t("option",{value:3},"三年級",-1),t("option",{value:4},"四年級",-1),t("option",{value:5},"五年級",-1),t("option",{value:6},"六年級",-1)]),512),[[k,e.value]])]),e.value===null?(a(),o("div",B," 請從上方選擇一個年級來顯示影片。 ")):d(l).loading?(a(),o("div",E," 🔄 正在載入 "+u(e.value)+" 年級的影片資料... ",1)):c("",!0),y(S,{name:"fade"},{default:w(()=>[!d(l).loading&&e.value!==null?(a(),o(f,{key:0},[d(l).hasUrls?(a(),o("ol",F,[(a(!0),o(f,null,U(d(l).urls,n=>(a(),o("li",{key:n,class:"list-group-item d-flex justify-content-between align-items-start"},[t("div",T,[s[3]||(s[3]=t("div",{class:"fw-bold"},"影片連結",-1)),t("a",{href:n,target:"_blank"},u(n),9,C)]),t("span",L,u(e.value)+"年級 ",1)]))),128))])):(a(),o("div",N," ❗ 查無 "+u(e.value)+" 年級的影片資料。 ",1))],64)):c("",!0)]),_:1})]),s[5]||(s[5]=t("div",{class:"video-placeholder d-none d-lg-block"},null,-1))]))}},I=v($,[["__scopeId","data-v-8ec9b348"]]);export{I as default};

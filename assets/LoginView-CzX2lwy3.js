import{d as w,u as b,r as n,c as s,h as p,a as e,t as v,b as k,i as m,v as h,w as x,g as V,o as t,_ as L}from"./index-DXTO70xG.js";const S={class:"auth-container"},A={key:0,class:"user-info"},B=["src"],C={key:1,class:"login-box"},M={type:"submit"},N={key:0,class:"spinner"},U={key:1},q={key:0,class:"error-message"},D=w({__name:"LoginView",setup(E){const o=b(),g=V(),r=n(""),u=n(""),l=n(""),c=n(!1),f=async()=>{c.value=!0;const i=await o.login(r.value,u.value);i.success||(l.value=i.message??"登入失敗"),c.value=!1},y=()=>{o.logout(),g.push("/")};return(i,a)=>{var _;return t(),s("div",S,[p(o).isAuthenticated?(t(),s("div",A,[e("img",{src:(_=p(o).user)==null?void 0:_.avatar,alt:"Avatar",class:"avatar"},null,8,B),e("span",null,v(p(o).getUserName),1),e("button",{onClick:y},"登出")])):(t(),s("div",C,[e("form",{onSubmit:x(f,["prevent"])},[m(e("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>r.value=d),type:"text",placeholder:"帳號",autocomplete:"username",required:""},null,512),[[h,r.value]]),m(e("input",{"onUpdate:modelValue":a[1]||(a[1]=d=>u.value=d),type:"password",placeholder:"密碼",autocomplete:"current-password",required:""},null,512),[[h,u.value]]),e("button",M,[c.value?(t(),s("span",N)):(t(),s("span",U,"登入"))])],32),l.value?(t(),s("p",q,v(l.value),1)):k("",!0)]))])}}}),R=L(D,[["__scopeId","data-v-b1bc741c"]]);export{R as default};

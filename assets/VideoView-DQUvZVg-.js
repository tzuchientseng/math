import{j as h,u as f,d as v,r as p,k as _,l as m,c as a,a as e,b as c,e as g,i as y,m as k,h as i,t as d,n as b,T as w,F as V,p as x,o as l,_ as S}from"./index-J63YPNVv.js";const U="https://home.sunnytseng.com/api/math-api/fetchUrl/",A=h("url",{state:()=>({videos:[],loading:!1}),getters:{hasVideos:u=>u.videos.length>0},actions:{async fetchUrl(u){const s=f();this.loading=!0;try{const t=await fetch(`${U}?grade=${u}`,{method:"GET",headers:{Authorization:`Bearer ${s.token??""}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Fetch Failed");const n=await t.json();this.videos=Array.isArray(n.videos)?n.videos:[]}catch(t){console.error("Error fetching URL:",t),this.videos=[]}finally{this.loading=!1}}}}),j={class:"video-selector container-fluid mt-4"},B={class:"mb-3"},C={key:0,class:"text-muted"},E={key:1,class:"text-info"},F={key:0},M={key:0,class:"list-group list-group-numbered"},T={class:"ms-2 me-auto"},L={class:"fw-bold"},N=["href"],$={class:"badge bg-primary rounded-pill"},D={key:1,class:"text-danger mt-3"},I={key:2,class:"text-danger mt-3"},R=v({__name:"VideoView",setup(u){const s=A(),t=p(null);return _(t,n=>{n!==null&&s.fetchUrl(n)}),m(()=>{t.value!==null&&s.fetchUrl(t.value)}),(n,o)=>(l(),a("div",null,[e("div",j,[o[3]||(o[3]=e("h2",null,"📺 各年級影片列表",-1)),e("div",B,[o[2]||(o[2]=e("label",{for:"gradeSelect",class:"form-label"},"🎓 選擇年級",-1)),y(e("select",{id:"gradeSelect",class:"form-select","onUpdate:modelValue":o[0]||(o[0]=r=>t.value=r)},o[1]||(o[1]=[e("option",{disabled:"",value:""},"請選擇年級",-1),e("option",{value:3},"三年級",-1),e("option",{value:4},"四年級",-1),e("option",{value:5},"五年級",-1),e("option",{value:6},"六年級",-1)]),512),[[k,t.value]])]),t.value===null?(l(),a("div",C," 請從上方選擇一個年級來顯示影片。 ")):i(s).loading?(l(),a("div",E," 🔄 正在載入 "+d(t.value)+" 年級的影片資料... ",1)):c("",!0),g(w,{name:"fade"},{default:b(()=>[!i(s).loading&&t.value!==null?(l(),a("div",F,[i(s).hasVideos?(l(),a("ol",M,[(l(!0),a(V,null,x(i(s).videos,r=>(l(),a("li",{key:r.url,class:"list-group-item d-flex justify-content-between align-items-start"},[e("div",T,[e("div",L,d(r.title),1),e("a",{href:r.url,target:"_blank"},d(r.url),9,N)]),e("span",$,d(r.grade)+" 年級 ",1)]))),128))])):(l(),a("div",D," ❗ 查無 "+d(t.value)+" 年級的影片資料。 ",1)),i(s).errorMessage?(l(),a("div",I,d(i(s).errorMessage),1)):c("",!0)])):c("",!0)]),_:1})]),o[4]||(o[4]=e("div",{class:"video-placeholder d-none d-lg-block"},null,-1))]))}}),G=S(R,[["__scopeId","data-v-de169ee9"]]);export{G as default};

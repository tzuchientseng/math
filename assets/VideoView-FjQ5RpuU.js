import{j as v,u as _,d as f,r as m,k as p,l as g,c as a,a as t,b as h,e as y,i as w,m as b,h as i,t as d,n as k,T as x,F as V,p as S,o as r,_ as U}from"./index-BT8kQSWs.js";const A="https://home.sunnytseng.com/api/math-api/fetchUrl/",C=v("url",{state:()=>({videos:[],loading:!1}),getters:{hasVideos:c=>c.videos.length>0},actions:{async fetchUrl(c){const o=_();this.loading=!0;try{const e=await fetch(`${A}?grade=${c}`,{method:"GET",headers:{Authorization:`Bearer ${o.token??""}`,"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fetch Failed");const u=await e.json();this.videos=Array.isArray(u.videos)?u.videos:[]}catch(e){console.error("Error fetching URL:",e),this.videos=[]}finally{this.loading=!1}}}}),E={class:"container"},I={class:"video-selector"},M={key:0,class:"text-center mt-3"},T={key:1,class:"text-info text-center mt-3"},B={key:0,class:"video-grid-container"},F={key:0,class:"video-grid"},$={class:"text-end"},j={class:"badge bg-primary rounded-pill"},L={class:"video-content"},N={class:"fw-bold text-center mt-2"},z={class:"video-preview"},D=["src"],R={class:"text-center"},G=["href"],P={key:1,class:"text-danger text-center mt-3"},Y={key:2,class:"text-danger text-center mt-3"},Z=f({__name:"VideoView",setup(c){const o=C(),e=m(null);p(e,l=>{l!==null&&o.fetchUrl(l)}),g(()=>{e.value!==null&&o.fetchUrl(e.value)});function u(l){const s=l.match(/(?:v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return`https://www.youtube.com/embed/${s?s[1]:""}`}return(l,s)=>(r(),a("div",E,[t("div",I,[s[2]||(s[2]=t("h1",null,"🎬 各年級影片",-1)),s[3]||(s[3]=t("label",{for:"gradeSelect",class:"form-label"},"🎓 選擇年級",-1)),w(t("select",{id:"gradeSelect",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=n=>e.value=n)},s[1]||(s[1]=[t("option",{disabled:"",value:""},"請選擇年級",-1),t("option",{value:"6"},"六年級",-1)]),512),[[b,e.value]])]),e.value===null?(r(),a("div",M," 未選擇年級 ~ ")):i(o).loading?(r(),a("div",T," ...正在載入 "+d(e.value)+" 年級的影片資料... ",1)):h("",!0),y(x,{name:"fade"},{default:k(()=>[!i(o).loading&&e.value!==null?(r(),a("div",B,[i(o).hasVideos?(r(),a("div",F,[(r(!0),a(V,null,S(i(o).videos,n=>(r(),a("div",{key:n.url,class:"video-card"},[t("div",$,[t("span",j,d(n.grade)+" 年級 ",1)]),t("div",L,[t("div",N,d(n.title),1),t("div",z,[t("iframe",{src:u(n.url),frameborder:"0",allowfullscreen:""},null,8,D)]),t("div",R,[t("a",{href:n.url,target:"_blank"},"👉 Click to watch on YouTube",8,G)])])]))),128))])):(r(),a("div",P," ❗ 查無 "+d(e.value)+" 年級的影片資料。 ",1)),i(o).errorMessage?(r(),a("div",Y,d(i(o).errorMessage),1)):h("",!0)])):h("",!0)]),_:1})]))}}),H=U(Z,[["__scopeId","data-v-1ce3621c"]]);export{H as default};

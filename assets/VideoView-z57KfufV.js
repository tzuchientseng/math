import{j as v,u as _,d as f,r as m,k as p,l as g,c as a,a as e,b as h,e as y,i as b,m as w,h as n,t as d,n as k,T as x,F as V,p as S,o as r,_ as U}from"./index-B4m4KVmw.js";const A="https://home.sunnytseng.com/api/math-api/fetchUrl/",C=v("url",{state:()=>({videos:[],loading:!1}),getters:{hasVideos:c=>c.videos.length>0},actions:{async fetchUrl(c){const o=_();this.loading=!0;try{const t=await fetch(`${A}?grade=${c}`,{method:"GET",headers:{Authorization:`Bearer ${o.token??""}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Fetch Failed");const u=await t.json();this.videos=Array.isArray(u.videos)?u.videos:[]}catch(t){console.error("Error fetching URL:",t),this.videos=[]}finally{this.loading=!1}}}}),E={class:"video-selector container-fluid"},I={key:0,class:""},M={key:1,class:"text-info"},T={key:0},B={key:0,class:"list-group list-group-numbered"},F={class:"text-end"},$={class:"badge bg-primary rounded-pill"},j={class:"video-content"},L={class:"fw-bold text-center"},N={class:"video-preview"},z=["src"],D={class:"text-center"},R=["href"],G={key:1,class:"text-danger"},P={key:2,class:"text-danger mt-3"},Y=f({__name:"VideoView",setup(c){const o=C(),t=m(null);p(t,i=>{i!==null&&o.fetchUrl(i)}),g(()=>{t.value!==null&&o.fetchUrl(t.value)});function u(i){const s=i.match(/(?:v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return`https://www.youtube.com/embed/${s?s[1]:""}`}return(i,s)=>(r(),a("div",null,[e("div",null,[e("div",E,[s[3]||(s[3]=e("h1",null,"🎬 各年級影片",-1)),e("div",null,[s[2]||(s[2]=e("label",{for:"gradeSelect",class:"form-label"},"🎓 選擇年級",-1)),b(e("select",{id:"gradeSelect",class:"form-select","onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l)},s[1]||(s[1]=[e("option",{disabled:"",value:""},"請選擇年級",-1),e("option",{value:"6"},"六年級",-1)]),512),[[w,t.value]])])])]),t.value===null?(r(),a("div",I," 未選擇年級 ~ ")):n(o).loading?(r(),a("div",M," ...正在載入 "+d(t.value)+" 年級的影片資料... ",1)):h("",!0),y(x,{name:"fade"},{default:k(()=>[!n(o).loading&&t.value!==null?(r(),a("div",T,[n(o).hasVideos?(r(),a("ol",B,[(r(!0),a(V,null,S(n(o).videos,l=>(r(),a("li",{key:l.url,class:"list-group-item"},[e("div",F,[e("span",$,d(l.grade)+" 年級 ",1)]),e("div",j,[e("div",L,d(l.title),1),e("div",N,[e("iframe",{src:u(l.url),frameborder:"0",allowfullscreen:""},null,8,z)]),e("div",D,[e("a",{href:l.url,target:"_blank"},"👉 Click to watch on YouTube",8,R)]),s[4]||(s[4]=e("hr",{class:"w-75 mx-auto my-4 border border-dark border-2 opacity-50"},null,-1))])]))),128))])):(r(),a("div",G," ❗ 查無 "+d(t.value)+" 年級的影片資料。 ",1)),n(o).errorMessage?(r(),a("div",P,d(n(o).errorMessage),1)):h("",!0)])):h("",!0)]),_:1})]))}}),q=U(Y,[["__scopeId","data-v-cb9cc05d"]]);export{q as default};
